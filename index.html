<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dashboard Performance Sales</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h2>Dashboard Performance Sales</h2>

  <table id="dataTable"></table>

<script>
  // Format angka ribuan
  function formatNumber(num) {
    return Number(num).toLocaleString('id-ID');
  }

  // Format persen
  function formatPercent(num) {
    return num.toFixed(2) + "%";
  }

  fetch('performance_sales.csv')
    .then(res => res.text())
    .then(text => {
      let lines = text.trim().split('\n');
      let table = document.getElementById('dataTable');

      // ====== HEADER ======
      let header = lines[0].split(',');
      header.push("Order %","Sales %","Gap Order","Gap Sales");

      let tr = document.createElement('tr');
      header.forEach(h => {
        let th = document.createElement('th');
        th.textContent = h;
        tr.appendChild(th);
      });
      table.appendChild(tr);

      // ====== DATA ======
      for(let i=1;i<lines.length;i++){
        let row = lines[i].split(',');

        let nama = row[0];
        let code = row[1];
        let cust = row[2];
        let target = Number(row[3]);
        let order = Number(row[4]);
        let sales = Number(row[5]);

        let orderPct = (order/target)*100;
        let salesPct = (sales/target)*100;
        let gapOrder = target - order;
        let gapSales = target - sales;

        let data = [
          nama,
          code,
          cust,
          formatNumber(target),
          formatNumber(order),
          formatPercent(orderPct),
          formatNumber(sales),
          formatPercent(salesPct),
          formatNumber(gapOrder),
          formatNumber(gapSales)
        ];

        let tr = document.createElement('tr');
        data.forEach(v => {
          let td = document.createElement('td');
          td.textContent = v;
          tr.appendChild(td);
        });
        table.appendChild(tr);
      }
    });
</script>
</body>
</html>
